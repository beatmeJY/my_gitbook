# Chapter 1

## 레디스(NoSQL)가 나오게 된 배경

1. **소프트웨어 아키텍처의 변화**
2.  &#x20;**데이터 저장소 요구사항의 변화**



### **1. 소프트웨어 아키텍처의 변화  (Monolitic** vs **Microservices)**

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1).png" alt=""><figcaption><p><a href="https://tech.ssut.me/goodbye-microservice/">https://tech.ssut.me/goodbye-microservice/</a></p></figcaption></figure>

* **모놀리틱 아키텍처**
  * 전통적인 소프트웨어 개발 모델이다.
  * **하나의 통합 된 패키지**로 개발하고 배포하는 방식이다.
  * 따라서 모든 시스템은 하나로 연결되고 관리된다.
  * 이 말은 하나의 장애가 전체 시스템의 장애로 이어질 수 있다.
* **마이크로 서비스 아키텍처**
  * 독립된 각각의 모듈을 조립해 하나의 서비스를 만드는 아키텍처이다.
  * 업데이트, 배포, 테스트, 확장 등 각 서비스 별로 독립적으로 수행할 수 있다.



### 2. 데이터 저장소 요구 사항의 변화 (RDBMS vs NoSQL)

<figure><img src="../../.gitbook/assets/image (2).png" alt=""><figcaption><p><a href="https://www.geeksforgeeks.org/sql-vs-nosql-which-one-is-better-to-use/">https://www.geeksforgeeks.org/sql-vs-nosql-which-one-is-better-to-use/</a></p></figcaption></figure>

#### **RDBMS**

* Monolitic Architecture 에선 모든 데이터를 하나의 데이터베이스에서 관리하기 위해 중앙 집약적인 관계형 데이터 베이스를 표준 삼아왔다.
* 이는 고정된 스키마를 갖으며  테이블 간의 관례를 정확하게 규정하고 있어 어플리케이션이 커질 수록 매우 복잡해지며 데이터를 추출하기 위한 쿼리도 복잡해진다.
* 예를 들어 JSON 데이터를 관계형 데이터베이스에 저장하려면 다양한 필드를 포함 할 수 있기 때문에, 항상 정해진 컬럼대로 데이터를 받도록 규약하고 정의해야 한다.

#### NoSQL

* 하지만 최근엔 정해진 형태가 없고 크기와 구조를 예측할 수 없는 비정형 데이터가 증가하고 있다.
* NoSQL에선 이러한 관계가 정의 되어 있지 않는 데이터를 저장한다는 공통적인 특징을 가지고 있다.



## NoSQL 이란? (Not Only SQL)

> 말 그대로 관계형 데이터데이스에서 테이블의 데이터를 **쿼리하기 위한 SQL을 사용하지 않는** 데이터 저장소의 의미를 내포하고 있다. - 개발자를 위한 레디스 26p.

### NoSQL의 특징

#### 실시간 응답

* 사람은 100ms이상의 지연 시간이 발생하면 지연이 있다고 인지를 한다고 한다.
* 데이터를 가져올 때 발생할 수 있는 지연 시간은 0  \~ 1 ms 이내 이여야 한다.
* NoSQL은 RDB에 비해 더빠른 응답 속도를 가진다.

#### 확장성

* 서비스의 업그레이드로 인해 계획적인 확장 뿐만 아니라 예상치 못한 이벤트 등으로 발생하는 트랜잭션 증가에 유연하게 확장 될 수 있다.

#### 고가용성

* 데이터 저장소는 굉장히 중요하므로 장애 상황에서 신속하게 복구되어 항상 사용할 수 있는 상태는 유지해야 한다.

#### 클라우드 네이티브

* 클라우드 네이티브는 클라우드 환경에 특화된 어플리케이션의 개발 및 운영 방식을 의미한다.
* 이는 클라우드에서 제공하는 DBaas 를 사용하여 직접 설치, 운영할 필요 없이 설치된 상품을 바로 사용할 수 있게 되었다.
* 이로써 운영을 위한 모니터링과 알람 또한 제공되어 데이터베이스를 사용하기 위한 번거로움이 간소화 되었다.

#### 단순성

* 마이크로서비스 아키텍처와 같이 서비스가 세분화 될수록 관리 포인트가 늘어나는데,
* NoSQL의 단순성은 이러한 환경에서 유리하다.
* 각 서비스에 맞는 적절한 데이터 모델을 사용하여 복잡성을 줄이고,
* 이를 통해 각 서비스는 자신에게 최적화된 데이터 저장 방식을 활용할 수 있어 개발과 유지보수의 효율성을 높일 수 있다.

#### 유연성

* 디지털 산업의 발전에 따른 다양한 데이터 유형의 생성이 폭발적으로 증가했는데,
* 이러한 데이터는 비정형 데이터가 급속하게 많아져 RDB로는 적합한 형식으로 저장하기 힘들어졌다.
* 때문에 다양한 방식으로 비정형 데이터를 저장할 수 있는 NoSQL은 이러한 단점을 극복할 수 있게 되었다.

## NoSQL 데이터 저장소 유형

### 그래프 유형

### 컬럼 유형

### 문서 유형

### Key-Value 유형



## 레디스란?

> Remote Dictionary Server 의 약자로 고성능 Key-Value 유형의 인메모리 NoSQL 데이터베이스로,
>
> 오픈 소스 기반의 데이터 저장소다.

### 레디스 특징

#### 실시간 응답

* Redis는 인메모리 데이터베이스의 특징을 나타내고 있다.
  * 인모리는 자주 사용되는 데이터를 캐싱되어 메모리에 올려두고 사용하는 방식을 말한다.
  * 반면, 온디스크란 영구적으로 디스크에 저장하는 방식을 말한다.
* 따라서 모든 데이터를 메모리에 저장하고 있기 때문에 디스크에 접근하지 않아 속도가 매우 빠르다.

#### 단순성

* 다양한 자료 구조를 통해 임피던스 불일치를 해소하고 개발을 편리하게 할 수 있도록 지원한다.
  * 임피던스 불일치란 기존 관계형 데이터베이스의 테이블과 프로그래밍 언어 간 데이터 구조, 기능의 차이로 인해 발생하는 충돌을 의미한다.
* 또한 싱글 스레드로 동작한다.
  * 정확히는 4개의 스레드로 동작하나 클라이언트의 커맨드를 처리하는 부분이 싱글 스레드로 동작한다.
  * 때문에 CPU가 적은 서버에서도 좋은 성능을 낼 수 있다.

#### 고가용성

* 레디스는 자체적으로 HA(High Availability) 기능을 제공한다.
* 복제를 통해 데이터를 서버에 분산 시킬 수 있고,
* 센티널은 장애 상황을 탐지해 자동으로 페일오버를 시켜준다.
* 그로 인해 레디스에 센티널을 이용해 연결하는 구조에서는 마스터에 장애가 발생하더라도 레디스로의 엔드포인트를 변경할 필요 없이 페일오버가 완료되어 정상화된 마스터 노드를 사용할 수 있게 된다.

#### 확장성

* 레디스에서 클러스터 모드를 사용한다면 손쉬운 수평적 확장이 가능하다.
* 데이터는 레디스 클러스터 내에서 자동으로 샤딩된 후 저장되며 여러개의 복제본이 생성될 수 있다.
* 클러스터 버스라는 프로토콜을 이용해 서로 감시하고 있으며, 이를 통해 어플리케이션에서는 대상 데이터가 어떤 샤드에 있는지 신경 쓰지 않아도 동일하게 데이터를 가져오고 저장할 수 있다.

#### 클라우드 네이티브 - 멀티 클라우드

* 마이크로서비스, 컨테이너, 오케스트레이션, 데브옵스 와 같은 현대의 개발 및 운영 패러다임을 포용하며, 빠른 배포와 확장성, 높은 복원력을 중심으로 한 어플리케이션을 추구한다.
* 빠른 데이터 액세스 및 처리를 지원하는 구조로 인해 마이크로 서비스 아키텍처와의 연계에서 큰 장점을 지닌다.
* 레디스는 다양한 클라우드에서 일관된 성능과 기능을 제공함으로써 서비스의 연속성과 데이터의 일관성을 보장한다.
  * 이는 단일 클라우드 환경의 장애나 제한된 자원에 대한 의존성을 줄이며,
  * 각 클라우드 서비스 제공자의 강점을 활용할 수 있게 해주고
  * 데이터가 특정 지역이나 국가 내에 물리적으로 위하도록 조절할 수 있어 더 가까운 저장소에서 데이터를 처리할 수 있도록 할 수도 있는 장점을 가진다.



